<Window x:Class="PL.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Main Window"
        Height="600" Width="900"
        WindowStartupLocation="CenterScreen"
        Background="#F3F6FA" 
        DataContext="{Binding RelativeSource={RelativeSource Mode=Self}}"
        Closed="MainWindow_Closed">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- כפתורי ניווט -->
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <!-- פעולות מערכת -->
            <RowDefinition Height="Auto"/>
            <!-- קביעת טווח שנה -->
            <RowDefinition Height="Auto"/>
            <!-- הצגת זמן -->
        </Grid.RowDefinitions>

        <!-- ניווט ראשי -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,20">
            <Button Content="ניהול מתנדבים" Width="180" Height="45" Background="#4CD8C2" Foreground="White" Click="VolunteerList_Click" Margin="0,0,20,0"/>
            <Button Content="ניהול קריאות" Width="180" Height="45" Background="#4CD8C2" Foreground="White" Click="CallList_Click"/>
        </StackPanel>

        <!-- פעולות מערכת -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,20">
            <Button Content="אתחול בסיס נתונים" Width="160" Height="50" Click="Init_Click" Margin="0,0,20,0"
                    IsEnabled="{Binding IsSimulatorRunning, Converter={StaticResource BooleanInverseConverter}}"/>
            <Button Content="איפוס תצורה + בסיס נתונים" Width="180" Height="50" Click="Resert_Click" Margin="0,0,20,0"
                    IsEnabled="{Binding IsSimulatorRunning, Converter={StaticResource BooleanInverseConverter}}"/>
            <!--<Button Content="סיכום קריאות לפי סטטוסים" Width="180" Height="50" Click="Button_Click_2" Margin="0,0,20,0"/>-->
        </StackPanel>

        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,20">
            <Label Content="Simualtor Interval:" VerticalAlignment="Center"/>
            <TextBox Width="80" Height="28" Text="{Binding Interval, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
            <Button Content="{Binding IsSimulatorRunning, Converter={StaticResource BoolToStartStopConverter}}" Width="180" Height="50" Click="Simulator_Click"/>
            <Label Content="{Binding ErrorMessage}" Foreground="Red" FontWeight="Bold" VerticalAlignment="Center"/>
        </StackPanel>

        <!-- קביעת טווח שנה -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,20">
            <Label Content="Max year range:" VerticalAlignment="Center"/>
            <TextBox Width="80" Height="28" Text="{Binding CurrentMaxRange, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
            <Button Content="Update" Width="80" Height="28" Click="Update_Click"
                    IsEnabled="{Binding IsSimulatorRunning, Converter={StaticResource BooleanInverseConverter}}"/>
            <Label Content="{Binding ErrorMessage}" Foreground="Red" FontWeight="Bold" VerticalAlignment="Center"/>
        </StackPanel>

        <!-- סימולטור זמן -->
        <StackPanel Grid.Row="4" Orientation="Vertical" HorizontalAlignment="Center">
            <Label Content="{Binding CurrentTime}" FontSize="22" FontWeight="Bold" Foreground="#2F3E46"
                   Background="#E0FBFC" Padding="10" HorizontalAlignment="Center"/>

            <WrapPanel HorizontalAlignment="Center" Orientation="Horizontal">
                <StackPanel Grid.Row="3" Orientation="Vertical" HorizontalAlignment="Center">
                    <Button Content="Add 1 Minute" Width="110" Click="Add_One_Minute_Click" Margin="0,0,0,10"
                            IsEnabled="{Binding IsSimulatorRunning, Converter={StaticResource BooleanInverseConverter}}"/>
                    <Button Content="Add 1 Hour" Width="110" Click="Add_One_Hour_Click" Margin="0,0,0,10"
                            IsEnabled="{Binding IsSimulatorRunning, Converter={StaticResource BooleanInverseConverter}}"/>
                    <Button Content="Add 1 Day" Width="110" Click="Add_One_Day_Click" Margin="0,0,0,10"
                            IsEnabled="{Binding IsSimulatorRunning, Converter={StaticResource BooleanInverseConverter}}"/>
                    <Button Content="Add 1 Month" Width="110" Click="Add_One_Month_Click" Margin="0,0,0,10"
                            IsEnabled="{Binding IsSimulatorRunning, Converter={StaticResource BooleanInverseConverter}}"/>
                    <Button Content="Add 1 Year" Width="110" Click="Add_One_Year_Click"
                            IsEnabled="{Binding IsSimulatorRunning, Converter={StaticResource BooleanInverseConverter}}"/>
                </StackPanel>
                <Border Grid.Row="0" Padding="15" Margin="0,0,0,20">
                    <StackPanel>
                        <TextBlock Text="Call Statistics" 
                   FontSize="16" 
                   FontWeight="Bold" 
                   HorizontalAlignment="Center"
                   Margin="0,0,0,10"/>

                        <!-- Statistics Grid - All in one row -->
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                            <!-- Open -->
                            <Button Click="OpenCalls_Click" Width="90" Height="35" Margin="3" BorderThickness="0" Cursor="Hand">
                                <StackPanel>
                                    <TextBlock Text="Open" FontSize="9" FontWeight="Bold" Foreground="White"/>
                                    <TextBlock Text="{Binding OpenCallsCount}" FontSize="14" FontWeight="Bold" Foreground="White"/>
                                </StackPanel>
                            </Button>

                            <!-- In Progress -->
                            <Button Click="InProgressCalls_Click" Width="90" Height="35" Margin="3" BorderThickness="0" Cursor="Hand">
                                <StackPanel>
                                    <TextBlock Text="In Progress" FontSize="8" FontWeight="Bold" Foreground="White"/>
                                    <TextBlock Text="{Binding InProgressCallsCount}" FontSize="14" FontWeight="Bold" Foreground="White"/>
                                </StackPanel>
                            </Button>

                            <!-- Closed -->
                            <Button Click="ClosedCalls_Click" Width="90" Height="35" Margin="3" BorderThickness="0" Cursor="Hand">
                                <StackPanel>
                                    <TextBlock Text="Closed" FontSize="9" FontWeight="Bold" Foreground="White"/>
                                    <TextBlock Text="{Binding ClosedCallsCount}" FontSize="14" FontWeight="Bold" Foreground="White"/>
                                </StackPanel>
                            </Button>

                            <!-- Expired -->
                            <Button Click="ExpiredCalls_Click" Width="90" Height="35" Margin="3" BorderThickness="0" Cursor="Hand">
                                <StackPanel>
                                    <TextBlock Text="Expired" FontSize="9" FontWeight="Bold" Foreground="White"/>
                                    <TextBlock Text="{Binding ExpiredCallsCount}" FontSize="14" FontWeight="Bold" Foreground="White"/>
                                </StackPanel>
                            </Button>

                            <!-- Open At Risk -->
                            <Button Click="OpenAtRiskCalls_Click" Width="90" Height="35" Margin="3" BorderThickness="0" Cursor="Hand">
                                <StackPanel>
                                    <TextBlock Text="Open Risk" FontSize="8" FontWeight="Bold" Foreground="White"/>
                                    <TextBlock Text="{Binding OpenAtRiskCallsCount}" FontSize="14" FontWeight="Bold" Foreground="White"/>
                                </StackPanel>
                            </Button>

                            <!-- Progress At Risk -->
                            <Button Click="InProgressAtRiskCalls_Click" Width="90" Height="35" Margin="3" BorderThickness="0" Cursor="Hand">
                                <StackPanel>
                                    <TextBlock Text="Progress Risk" FontSize="7" FontWeight="Bold" Foreground="White"/>
                                    <TextBlock Text="{Binding InProgressAtRiskCallsCount}" FontSize="14" FontWeight="Bold" Foreground="White"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </WrapPanel>
        </StackPanel>
    </Grid>
</Window>
