<Window x:Class="PL.Volunteer.Available"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Available Calls"
        Height="700"
        Width="1000"
        DataContext="{Binding RelativeSource={RelativeSource Mode=Self}}"
        WindowStartupLocation="CenterScreen"
        FontFamily="Segoe UI"
        Background="#f7faff">

    <Border>
        <DockPanel LastChildFill="True" Margin="0">

            <!-- Header Section -->
            <StackPanel DockPanel.Dock="Top" Orientation="Vertical" Margin="0,0,0,20">
                <TextBlock Text="Available Calls List"
                           FontSize="26"
                           FontWeight="Bold"
                           Foreground="#4CD8C2"
                           Margin="20,10,0,10" Width="228"/>

                <!-- Filters Row -->
                <UniformGrid Columns="2" Margin="20,0,20,0" HorizontalAlignment="Stretch" Width="822">
                    <!-- Sorting -->
                    <StackPanel Orientation="Vertical" Margin="0,0,12,0">
                        <TextBlock Text="Sort by"
                                   FontSize="14"
                                   FontWeight="SemiBold"
                                   Margin="0,0,0,4"/>
                        <ComboBox ItemsSource="{Binding Source={StaticResource OpenCallFieldCollectionKey}}"
                                  SelectedValue="{Binding Path=CallSortProp, Mode=TwoWay}"
                                  SelectionChanged="SelectionChangedInOpenCallListProp"
                                  Height="32"
                                  FontSize="14"/>
                    </StackPanel>

                    <!-- Filter by Type -->
                    <StackPanel Orientation="Vertical" Margin="0,0,12,0">
                        <TextBlock Text="Filter by Type"
                                   FontSize="14"
                                   FontWeight="SemiBold"
                                   Margin="0,0,0,4"/>
                        <ComboBox ItemsSource="{Binding Source={StaticResource TypeOfReadingCollectionKey}}"
                                  SelectionChanged="SelectionChangedInOpenCallListProp"
                                  SelectedValue="{Binding Path=TypeOfCallFilterProp, Mode=TwoWay}"
                                  Height="32"
                                  FontSize="14"/>
                    </StackPanel>
                </UniformGrid>
            </StackPanel>

            <!-- ListView Section -->
            <ListView ItemsSource="{Binding Path=CallAvailableList}"
                      Margin="20,0,20,20"
                      BorderThickness="1"
                      BorderBrush="#e1e6f2"
                      Background="White" Width="827" SelectionChanged="ListView_SelectionChanged">
                <ListView.View>
                    <GridView AllowsColumnReorder="True">
                        <GridViewColumn Header="ID" Width="60">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Id}" />
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>

                        <GridViewColumn Header="Type" Width="120">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Type}" />
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>

                        <GridViewColumn Header="Description" Width="120">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Description}" />
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>

                        <GridViewColumn Header="Address" Width="150">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding FullAddress}" />
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>

                        <GridViewColumn Header="Opened" Width="130">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding OpeningTime}" />
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>

                        <GridViewColumn Header="Ended" Width="130">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding MaxCompletionTime}" />
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>

                        <GridViewColumn Header="Distance" Width="130">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding DistanceFromVolunteer}" />
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>

                        <GridViewColumn Width="100">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="קבל" Click="SelectCall_Click"
                                             CommandParameter="{Binding}" Background="#F87171"
                                             Foreground="White" Padding="4"/>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>

                    </GridView>
                </ListView.View>
            </ListView>

        </DockPanel>
    </Border>
</Window>
